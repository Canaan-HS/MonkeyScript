# **Twitchのドロップを自動受け取り**

---

## **👻 使用方法**

1. ブラウザスクリプト管理ツール（[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)など）をインストールする
2. [スクリプトをインストールする](https://update.greasyfork.org/scripts/474799/Twitch%20%E8%87%AA%E5%8B%95%E9%A0%98%E5%8F%96%E6%8E%89%E5%AF%B6%20%20Auto%20Receive%20Drops.user.js)
3. [inventory](https://www.twitch.tv/drops/inventory) ページにアクセスする

---

## **⚠️ 使用上の注意**
- Twitchがページ要素を変更した場合、機能が動作しなくなる可能性があり、再設定が必要になります（問題があればフィードバックをお願いします）
- ❗️ 個人での使用に問題がある場合は、まず設定パラメータをカスタマイズしてみてください。これは非常にシンプルなスクリプトで、異なる環境に適応する機能はありません
- 使用時はスクリプト管理ツールがこのスクリプトを読み込んでいることを確認し、配信ページとInventoryページを同時に開いた状態でバックグラウンドに置いて自動受け取りを待ちます


## **📜 機能概要**

### **配信の自動再起動**
- 設定のRestartLiveがTrueの場合に有効
- inventoryページに「ドロップの進行状況がある」場合、毎回更新時に記録され、進行状況が変化せず、変化のない時間がJudgmentIntervalの設定時間以上の場合、配信が中断されたと判断し、配信を再起動します
- 言語フィルタリングを設定すると見つからない可能性があるため、なるべく設定しないでください。チャンネルのTagsがFindTagの設定テキストと一致するかどうかに基づいて、最初に一致する配信を開きます
- 2回目の配信再起動の場合、前回のウィンドウは自動的に閉じられ、常に1つの配信ウィンドウを維持します（自分で開いたものは無効）

### **完了時の自動クローズ**
- 設定のEndAutoCloseがTrueの場合に有効
- 記録されているドロップの進行状況がある場合、完了後にウィンドウが自動的に閉じられます
- 記録されているドロップの進行状況がない場合は、トリガーされません

### **期限切れの進行状況のクリア**
- 設定のClearExpirationがTrueの場合に有効
- これはイベント時間が既に期限切れになっているドロップオブジェクトをクリアするためのものですが、この機能はタイムスタンプを判断する必要があり、異なる言語のタイムスタンプ形式が異なるため、現在は特定の言語のみをサポートしています。サポート外の言語では効果がありません
- **🌐 サポート言語**：ウェブサイト設定に基づいて以下の言語に自動適応します：
  - en-US、en-GB、es-ES、fr-FR、pt-PT、pt-BR、ru-RU、de-DE、it-IT、tr-TR、es-MX、ja-JP、ko-KR、zh-TW、zh-CN


## **⚙️ 追加設定（コード上部）**

|   **パラメータ**    |                             **説明**                             |             **デフォルト値**              |
| :-----------------: | :--------------------------------------------------------------: | :---------------------------------------: |
|    `RestartLive`    |                         配信の自動再起動                         |                  `true`                   |
|   `EndAutoClose`    |            イベント完了後にウィンドウを自動的に閉じる            |                  `true`                   |
|   `TryStayActive`   |           ウィンドウを常にアクティブな状態に「試みる」           |                  `true`                   |
|  `RestartLiveMute`  | 配信再起動後にミュート（必ずしも有効ではない、または動作が遅い） |                  `true`                   |
| `RestartLowQuality` |                 配信再起動時に最低画質に自動設定                 |                  `false`                  |
|   `UpdateDisplay`   |      ウェブタブにドロップチェックの間隔カウントダウンを表示      |                  `true`                   |
|  `ClearExpiration`  |            期限切れイベントのドロップ進行状況をクリア            |                  `true`                   |
|  `ProgressDisplay`  |                ウェブタブにドロップ進行状況を表示                |                  `true`                   |
|  `UpdateInterval`   |                 ドロップチェックの間隔時間（秒）                 |                   `120`                   |
| `JudgmentInterval`  |                配信再起動を判断する間隔時間（分）                |                    `6`                    |
|      `FindTag`      |                    配信再起動時に検索するタグ                    | `drops、啟用掉寶、启用掉宝、드롭활성화됨` |

---

## **🔗 関連リンク**

- **開発環境**：[Greasy Fork](https://greasyfork.org/zh-TW/users/989635-canaan-hs)  
- **GitHub リポジトリ**：[GitHub](https://github.com/Canaan-HS/MonkeyScript/tree/main/TwitchReceiveDrops)

---

## **📦 バージョン情報**

**リリースバージョン：0.0.16**

### **更新内容**
1. `GM_notification` を削除

---