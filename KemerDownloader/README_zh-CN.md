# **媒体一键下载 & 数据获取工具**

## ⚠️ 近期网站频繁变更，部分功能随时都有失效的可能 或出现 BUG，有问题请反馈

---

## **👻 使用方法**

1. 安装浏览器脚本管理工具（如 [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)）
2. [安装脚本](https://update.greasyfork.org/scripts/472282/Kemer%20%E4%B8%8B%E8%BC%89%E5%99%A8.user.js)
3. 前往
    - [kemono](https://kemono.su/)
    - [coomer](https://coomer.su/)
    - [nekohouse](https://nekohouse.su/)

---

## **⚠️ 使用须知**
- 建议等到页面，原图全部显示，再按下下载
- 当前页面没有 Files 标签，就不会创建下载按钮
- 有时页面载入太快，MutationObserver 来不及创建，可能会导致按钮无法创建

## **📜 功能概述**

### **下载按钮**
- 在页面 Files 标签旁创建，觉得很不显眼的，你是对的因为本来就是这样设计的

### **切换下载模式**
- 压缩下载
- 单图下载 (新版插件怪怪的)

### **一键开帖（仅限帖子预览页面）**
- 输入开启的范围，自动开启当前页面所有帖子

### **数据获取（仅限帖子预览页面）**
- 以当前页数开始，直到最后一页，获取帖子相关数据 (预设 Json)
- 可设置排除特定类型，或启用 ToLinkTxt 转换 Txt 文本 (只包含下载链接) [支持 IDM 与 Aria2 文本导入格式]

## **⚙️ 额外配置（代码上方）**
|       **参数**       |                   **说明**                   | **默认值** |
| :------------------: | :------------------------------------------: | :--------: |
|        `Dev`         |        开发模式，在控制台列印调试资讯        |  `false`   |
|   `IncludeExtras`    | 下载包含除图片以外的附件，会大幅增加下载时间 |  `false`   |
|   `CompleteClose`    |            下载完成后自动关闭页面            |  `false`   |
|  `ConcurrentDelay`   |          下载送出请求的延迟 (毫秒)           |   `500`    |
| `ConcurrentQuantity` |            下载同时发起请求的数量            |    `5`     |
|   `BatchOpenDelay`   |     一键开帖，开启每个帖子的延迟 (毫秒)      |   `500`    |

---

## 📣 问题反馈

> 首先这些脚本原本为我个人使用所撰写，后续纯粹分享提供给有需要的人。  
>
> 作为一位免费提供脚本的开发者，我并未收取任何费用，也无义务为所有情况提供支援，因此恳请您在反馈时保持基本的尊重与友善。

#### ❓ 提交问题前，请注意以下要点：

**不确定是 bug 还是设定问题？** 请使用「询问」的方式描述您的状况，而非直接断定脚本有错误。

#### 🔍 描述参考：

- **🖥️ 执行环境**：浏览器、脚本管理器(Tampermonkey等)、系统平台
- **🧭 操作过程**：详细的步骤说明，不要只提供简短叙述
- **🎯 预期结果**：您希望达到什么效果，实际上发生了什么
- **🤖 建议(选填)**：若方便，请先尝试让AI协助理解您的问题，并附上转述结果

#### ⚠️ 重要提醒：

**这是免费脚本，非商业产品**

若您的反馈缺乏细节、情绪化、不具建设性，或只是简单一句话，我将无法也不会花时间猜测您的意思，这类反馈只会消耗开发热情与时间。

#### 💡 请理解：

**开发、测试与维护脚本需要投入大量心力** ，轻率的负面评价可能使开发者感到挫折，甚至选择停止维护，请珍惜这些免费资料，并以具体、理性的方式回报问题。

**如果您不愿协助厘清问题，只想发泄后离开**，建议您可以选择不使用本脚本，不要浪费彼此的时间。

**后续若出现模糊不清、缺乏建设性的留言，我将选择忽略，最终可能放弃脚本维护，感谢您的理解与配合。**

---

## **🔗 相关连结**

- **开发环境**：[Greasy Fork](https://greasyfork.org/zh-TW/users/989635-canaan-hs)  
- **GitHub 仓库**：[GitHub](https://github.com/Canaan-HS/MonkeyScript/tree/main/KemerDownloader)

---

## **📦 版本资讯**

**发布版本：2025.09.03-Beta** 

### **更新内容**
目前网站 API 变动频繁，为求通用性需进行大量测试。作为个人开发者，无法投入全部精力在脚本测试上，若有支援问题，请回报错误状况及对应页面网址。  

1. **相容性修正**
   - 调整以符合网站近期变更
   - 适应 KemerEnhance 脚本变更
2. **下载功能优化**
   - 优化压缩实作，加速压缩速度
3. **抓取数据优化**
   - 支持更多种外部连结格式解析，与 Mega 密码字段解析
   - 目前新版本 API 只支持 AdvancedFetch 一般 Fetch 禁用

### **已知问题**
1. Tampermonkey 较新的版本 GM_download API 有点异常，导致单图下载功能会出错，建议只使用压缩下载

---