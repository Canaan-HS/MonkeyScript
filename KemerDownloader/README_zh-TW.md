# **圖片一鍵下載 and 數據處理工具**

## ⚠️ 目前網站大改, 某些功能失效, 或導致網站無法正常運作, 先停用該腳本等待修正

---

## **👻 使用方法**

1. 安裝瀏覽器腳本管理工具（如 [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)）
2. [安裝腳本](https://update.greasyfork.org/scripts/472282/Kemer%20%E4%B8%8B%E8%BC%89%E5%99%A8.user.js)
3. 前往
    - [kemono](https://kemono.su/)
    - [coomer](https://coomer.su/)
    - [nekohouse](https://nekohouse.su/)

---

## **⚠️ 使用須知**
- 建議等到頁面，原圖全部顯示，在按下下載
- 當前頁面沒有 Files 標籤，就不會創建下載按鈕
- 有時頁面載入太快，MutationObserver 會來不及創建，可能會導致按鈕無法創建


## **📜 功能概述**

### **下載按鈕**
- 在頁面 Files 標籤旁創建，覺得很不顯眼的，你是對的因為本來就是這樣設計的

### **切換下載模式**
- 壓縮下載
- 單圖下載 (新版插件怪怪的)

### **一鍵開帖（僅限帖子預覽頁面）**
- 輸入開啟的範圍，自動開啟當前頁面所有帖子

### **數據獲取（僅限帖子預覽頁面）**
- 以當前頁數開始，直到最後一頁，獲取帖子相關數據 (目前發佈版僅在 nekohouse 可正常運作，開發版則是另外兩個)


## **⚙️ 額外配置（代碼上方）**
|       **參數**       |                   **說明**                   | **預設值** |
| :------------------: | :------------------------------------------: | :--------: |
|        `Dev`         |        開發模式，在控制台列印調試資訊        |  `false`   |
|   `IncludeExtras`    | 下載包含除圖片以外的附件，會大幅增加下載時間 |  `false`   |
|   `CompleteClose`    |            下載完成後自動關閉頁面            |  `false`   |
|  `ConcurrentDelay`   |           下載送出請求的延遲 (秒)            |    `3`     |
| `ConcurrentQuantity` |            下載同時發起請求的數量            |    `5`     |
|   `BatchOpenDelay`   |     一鍵開帖，開啟每個帖子的延遲 (毫秒)      |   `500`    |

---

## 📣 問題反饋

> 首先這些腳本原本為我個人使用所撰寫，後續純粹分享提供給有需要的人。
>
> 作為一位免費提供腳本的開發者，我並未收取任何費用，也無義務為所有情況提供支援，因此懇請您在反饋時保持基本的尊重與友善。

#### ❓ 提交問題前，請注意以下要點：

**不確定是bug還是設定問題？** 請使用「詢問」的方式描述您的狀況，而非直接斷定腳本有錯誤。

#### 🔍 描述參考：

- **🖥️ 執行環境**：瀏覽器、腳本管理器(Tampermonkey等)、系統平台
- **🧭 操作過程**：詳細的步驟說明，不要只提供簡短敘述
- **🎯 預期結果**：您希望達到什麼效果，實際上發生了什麼
- **🤖 建議(選填)**：若方便，請先嘗試讓AI協助理解您的問題，並附上轉述結果

#### ⚠️ 重要提醒：

**這是免費腳本，非商業產品**

若您的反饋缺乏細節、情緒化、不具建設性，或只是簡單一句話，我將無法也不會花時間猜測您的意思，這類反饋只會消耗開發熱情與時間。

#### 💡 請理解：

**開發、測試與維護腳本需要投入大量心力** ，輕率的負面評價可能使開發者感到挫折，甚至選擇停止維護，請珍惜這些免費資源，並以具體、理性的方式回報問題。

**如果您不願協助釐清問題，只想發洩後離開**，建議您可以選擇不使用本腳本，不要浪費彼此的時間。

**後續若出現模糊不清、缺乏建設性的留言，我將選擇忽略，最終可能放棄腳本維護，感謝您的理解與配合。**

---

## **🔗 相關連結**

- **開發環境**：[Greasy Fork](https://greasyfork.org/zh-TW/users/989635-canaan-hs)  
- **GitHub 倉庫**：[GitHub](https://github.com/Canaan-HS/MonkeyScript/tree/main/KemerDownloader)

---

## **📦 版本資訊**

**發佈版本：2025.08.06-Beta** 

### **更新內容**
目前網站 API 變動頻繁，為求通用性需進行大量測試。作為個人開發者，無法投入全部精力在腳本測試上，若有支援問題，請回報錯誤狀況及對應頁面網址。

1. 下載功能調整
    - 暫時新增「Files」與「Downloads」按鈕，分別下載不同數據。啟用 IncludeExtras 後，兩者合併為相同數據，點哪個結果都一致（實驗性）。

2. 抓取數據優化
   - 新增對 nekohouse 基本數據的支援（不含雲端等外部連結）。
   - 改善數據處理穩定性與編碼轉換問題（實驗性）。

### **已知問題**
1. Tampermonkey 較新的版本 GM_download API 有點異常，導致單圖下載功能會出錯，建議只使用壓縮下載

---