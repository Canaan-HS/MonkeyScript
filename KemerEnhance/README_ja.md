# **ウェブサイト利用体験の強化**

## ⚠️ 最近サイトが頻繁に変更されており、一部の機能がいつでも機能しなくなったりバグが発生したりする可能性があります。問題がある場合はフィードバックをお願いします

---

## **👻 使用方法**

1. ブラウザスクリプト管理ツール（[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)など）をインストールする
2. [スクリプトをインストールする](https://update.greasyfork.org/scripts/472096/Kemer%20%E5%A2%9E%E5%BC%B7.user.js)
3. 以下のサイトにアクセスする
   - [kemono](https://kemono.cr/)
   - [coomer](https://coomer.st/)
   - [nekohouse](https://nekohouse.su/)

---

## **📜 機能概要**

### **設定メニュー（投稿内のみ）**

- 原画、幅、高さ、間隔の設定、リアルタイムプレビュー
- メニュー言語サポート（デフォルトは英語）
  - 繁体字中国語
  - 簡体字中国語
  - 日本語
  - 英語
  - 韓国語
  - ロシア語

## **⚙️ 追加設定（コード上部）**

|  **パラメータ**   |                                **説明**                                | **デフォルト** |
| :---------------: | :--------------------------------------------------------------------: | :------------: |
|    `BlockAds`     |                           広告を簡易ブロック                           |     `true`     |
|   `CacheFetch`    |    同一タブでの Fetch データをキャッシュし、以降の読み込みを高速化     |     `true`     |
|  `DeleteNotice`   |                               通知を削除                               |     `true`     |
| `SidebarCollapse` |             サイドバーを折りたたみ、マウスを近づけると復元             |     `true`     |
|    `KeyScroll`    |               キーボードショートカット ↑↓ 自動スクロール               |     `true`     |
|   `TextToLink`    |        テキスト形式のリンク文字列を、クリック可能なリンクに変換        |     `true`     |
|    `FixArtist`    | Pixiv 名でサイト表示名を修正、カスタム可能、元サイトのタグへ直接リンク |     `true`     |
|    `CardZoom`     |                      プレビューカードのサイズ調整                      |     `true`     |
|    `CardText`     |                    プレビューカードの文字効果を調整                    |     `true`     |
| `BetterThumbnail` |                プレビューカード画像を投稿内の画像に置換                |     `true`     |
| `QuickPostToggle` |          投稿プレビューを素早く切替 (現在 nekohouse のみ対応)          |     `true`     |
|   `NewTabOpens`   |                      ページ遷移を新しいタブで開く                      |     `true`     |
|   `ExtraButton`   |          下部に追加ボタン、トップに戻る・直接ページ切替が可能          |     `true`     |
|  `LinkBeautify`   |     ダウンロードリンクを美化し、(browse ») をホバーで内容表示可能      |     `true`     |
|  `CommentFormat`  |                        コメントのレイアウト調整                        |     `true`     |
|  `VideoBeautify`  |      動画のスタイルを美化し、ダウンロードリンクをタイトル部に表示      |     `true`     |
|  `OriginalImage`  |                             自動的に原画像                             |     `true`     |

## **📜 その他の説明**

```
設定メニュー（即時反応しない場合は、ページを更新してください）

現在、投稿内（自動原画が機能する場所）でのみ設定メニューが表示されます。上部のプラグインから開きます。
現在は画像サイズ調整機能のみです。デザインセンスのない私は、後続のメニュー完成が面倒ですw


KeyScroll:
（モードの違いは実装方法です。好みに応じて選択してください）
↑ ↓ キーボード操作、スクロール中に再度押すと停止、反対方向を押すと反対方向のスクロールが開始

[1] アニメーションフレームスクロール
[2] インターバルスクロール

CardText:
[1] 投稿プレビューページで、プレビューカードのテキストを非表示、マウスホバーで表示
[2] 投稿プレビューページで、プレビューカードのテキストを薄く表示、マウスホバーで通常表示

CardZoom:
[1] プレビューカード拡大 [v0.0.46以前のデフォルト]
[2] プレビューカード拡大 + ホバー時スケーリング

VideoBeautify:
[1] Downloadエリアのダウンロードリンクを動画上部のタイトルとしてコピー、上部タイトルから直接ダウンロード可能、またはDownloadエリアまでスクロールしてダウンロード
[2] Downloadエリアのダウンロードリンクを動画上部のタイトルに移動、上部タイトルから直接ダウンロード可能、Downloadエリアの重複は削除

OriginalImage:
[1] 高速自動原画表示、ネットワークとコンピュータの負荷が高いが速度が速い
[2] 超低速自動原画表示、1枚の画像が完全に読み込まれてから次の画像を読み込む、ネットワークとコンピュータの負荷が低いが速度が非常に遅い
[3] スクロール表示時に原画読み込みをトリガー、表示していない画像は自動読み込みしない、ネットワークとコンピュータの負荷はスクロール速度による、読み込み速度は中程度

原画実験レンダリング方式（サーバーの問題で停止することがあり、手動クリックでもトリガー可能）:
元に戻すには experiment を false に変更

元々はプレビュー画像を直接置き換え、その後原画の読み込みを待つ
実験方式では、まず原画データを取得してから置き換えを行い、読み込み中はプレビュー画像に緑枠インジケーターが表示され、読み込み進捗も表示される
```

---

## 📣 問題フィードバック

> まず、これらのスクリプトは私個人が使用するために作成したもので、その後純粋に必要とする人々に共有するためのものです。
>
> 無料でスクリプトを提供する開発者として、私は料金を一切請求していないため、すべての状況にサポートを提供する義務もありません。したがって、フィードバックの際には基本的な敬意と友好的な態度を維持するようお願いします。

#### ❓ 問題を提出する前に、以下の点に注意してください：

**バグなのか設定の問題なのかわからない場合？** スクリプトに誤りがあると断定するのではなく、「質問」の形で状況を説明してください。

#### 🔍 説明の参考：

- **🖥️ 実行環境**：ブラウザ、スクリプトマネージャ（Tampermonkeyなど）、システムプラットフォーム
- **🧭 操作プロセス**：詳細な手順説明、簡単な記述だけではなく
- **🎯 期待される結果**：どのような効果を期待していたか、実際に何が起こったか
- **🤖 提案（任意）**：可能であれば、AIに問題を理解させてみて、その結果を添付してください

#### ⚠️ 重要な注意：

**これは無料のスクリプトであり、商業製品ではありません**

もしあなたのフィードバックが詳細に欠け、感情的で、建設的でない、または単なる一言だけの場合、私はあなたの意図を推測するための時間を割くことができませんし、そのようなフィードバックは開発の熱意と時間を消費するだけです。

#### 💡 ご理解ください：

**スクリプトの開発、テスト、メンテナンスには多大な労力が必要です**。軽率な否定的評価は開発者を挫折させ、メンテナンスを停止させる可能性があります。これらの無料リソースを大切にし、具体的かつ理性的な方法で問題を報告してください。

**問題を明確にする協力をしたくなく、ただ不満を吐き出して去りたいだけの場合**、このスクリプトを使用しないことをお勧めします。お互いの時間を無駄にしないでください。

**今後、不明瞭で建設的でないコメントが表示された場合、私は無視することを選択し、最終的にはスクリプトのメンテナンスを放棄する可能性があります。ご理解とご協力に感謝します。**

---

## **🔗 関連リンク**

- **開発環境**：[Greasy Fork](https://greasyfork.org/zh-TW/users/989635-canaan-hs)
- **GitHub リポジトリ**：[GitHub](https://github.com/Canaan-HS/MonkeyScript/tree/main/KemerEnhance)

---

## **💻 開発者向け追加説明**

互換性に関する提案：

- **CacheFetch キャッシュ干渉を回避**  
  - 常に最新の API 内容を要求したい場合、キャッシュに上書きされないよう Fetch リクエストにカスタムヘッダを追加してください：  
    ```
    X-Bypass-CacheFetch: true
    ```
  - スクリプトがこのヘッダを検出すると、内部キャッシュロジックを回避し、実際のリクエストを送信します。

- **LinkBeautify が Download セクションを変更するのを回避**  
  - デフォルトでは、スクリプトは Downloads セクションに美化タグを追加します。  
  - 元の DOM を取得する必要がある場合は、次のフィルタを使用してください：  
    ```css
    :not([beautify])
    ```

- **OriginalImage による Files セクションの上書きを回避**  
  - スクリプトはプレビュー画像を元画像に差し替える可能性があり、DOM 構造に影響します。  
  - 安定してファイルソースを取得するには、次のセレクタを推奨します：  
    ```javascript
    // 例
    document.querySelector("a, rc, img")
    ```
  - ノードの `.href || .src` を確認して互換性を確保してください。

---

## **📦 バージョン情報**

**リリースバージョン：2025.09.25-Beta**

### **更新内容**
1. ツールライブラリを更新しました  
2. コンテンツのマッチング方式を改善（実験中、不具合があればご報告ください）  
3. BackToTop を削除（サイトに標準機能として実装済み）  
4. FixArtist に「クイックプレビュー」を追加

### **既知の問題**
1. ページ読み込み速度がコードの機能初期化より遅い場合があり、その際は機能が動作しないことがある。通常は再読み込みで解決可能。

---